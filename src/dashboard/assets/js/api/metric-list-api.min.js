$.ajax({
  url: 'https://cors-anywhere.herokuapp.com/' + 'https://europe.grc1.com/iGRC/Auth/token',
  method: 'POST',
  async: true,
  crossDomain: true,
  data: {
    username: 'rich.interface@esg1.com',
    password: 'Temp5678',
    grant_type: 'password',
  },
  

  success: function (data) {
    console.log(data);
    $.ajax({
      url: 'https://cors-anywhere.herokuapp.com/'+'https://europe.grc1.com/iGRC/api/Metric/Get',
      async: true,
      crossDomain: true,
      method: 'GET',
      data: {
        tenantName: 'ESG-ONE',
      },
      beforeSend: function (xhr) {
        xhr.setRequestHeader('Authorization', 'Bearer ' + data.access_token);
      },

      success: function (data2) {
        const metricArr = data2;
        metricArr.forEach((metric) => {
          const el = ` <tr>
                  <td>${metric.MetricNumber}</td>
                  <td><a href="/dashboard/company/metric.html#overview" onclick="redirectToMetric(this)" data-id=${metric.MetricId}> ${metric.Name} </a></td>
                  <td>${metric.Category}</td>
                  <td>${metric.OwnerName}</td>
                  <td>${metric.Type}</td>
                  <td>${metric.Company}</td>
                  <td>${metric.Office}</td>
                  <td>${metric.BusinessUnit}</td>
                  <td>${metric.Importance}</td>
                  <td>${metric.ExecutiveOwnerName}</td>
                </tr>
                  `;
          $('#metric-table-body').append(el);
        });
      },
      error: function (e) {},
    });
  },
  error: function (e) {
    console.log('error');
  },
});

function redirectToMetric(e) {
  localStorage.setItem('metric id', $(e).data('id'));
  console.log(localStorage.getItem('metric id'));
}


var credentials={
  username: 'rich.interface@esg1.com',
  password: 'Temp5678',
  grant_type: 'password',
}