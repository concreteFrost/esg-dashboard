$(document).ready(()=>{
    $.ajax({
        url: 'https://cors-anywhere.herokuapp.com/'+'https://europe.grc1.com/iGRC/Auth/token',
        method: 'POST',
        data: {
          username: 'rich.interface@esg1.com',
          password: 'Temp5678',
          grant_type: 'password',
        },
       
        success: function (data) {

          $.ajax({
            url: 'https://cors-anywhere.herokuapp.com/'+'https://europe.grc1.com/iGRC/api/Metric/GetById?metricId=' +localStorage.getItem('metric id'),
            method: 'GET',
            headers: {
              Authorization: 'BEARER ' + data.access_token,
            },
            success: function (data2) {
                console.log(data2)
                $('.metric-company').html(data2.Name)
                $('.metric-office').html(data2.Office)
                $('#current-value').html(data2.CurrentValue)
                $('#metric-name').html(data2.Category)
                $('#metric-owner').html(data2.OwnerName)
                $('#metric-exec-owner').html(data2.ExecutiveOwnerName)
                $('.metric-upper-limit-value').html(data2.UpperLimitValue);
                $('.metric-benchmark-value').html(data2.IndustryBenchmark);
                $('.metric-target-value').html(data2.TargetValue)
                $('.metric-current-value').html(data2.CurrentValue)
                $('.metric-lover-limit-value').html(data2.LowerLimitValue)
                $('#metric-last-review-date').html(data2.LastReviewDate.split('T')[0])
                switch(data2.Type){
                  case 'Social':
                    $('#social-btn').addClass('button-nav-active');
                    break;
                  case 'Environmental':
                    $('#environmental-btn').addClass('button-nav-active');
                  break;
                }
            },
            error: function (e) {
                console.log('error')
            },
          });
        },
        error: function (e) {
          console.log(e);
        },
      });
    

})
