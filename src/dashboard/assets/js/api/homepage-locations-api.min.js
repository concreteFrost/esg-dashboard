
  //Get Markers on a page load
  $.ajax({
    setup,
    success: function (data) {
      $.ajax({
        url: 'https://europe.grc1.com/iGRC/api/Office/Get',
        data: {
          tenantName: 'ESG One - Production',
        },
        method: 'GET',
        headers: {
          Authorization: 'BEARER ' + data.access_token,
        },
        success: function (data2) {
          //Use this object to highlight regions on start
          var regionHighLight = {};
          data2.forEach((d) => {
            $.ajax({
              url:
                'https://restcountries.com/v3.1/alpha/' + d.Country.CountryCode,
              method: 'GET',
              success: function (countryInfo) {
                VectorMap.addMarker(
                  countryInfo[0].name.common,
                  countryInfo[0].latlng
                );
                var content =`
                <tr>
                <td><img src="${countryInfo[0].flags.png}" width="40px"></td>
                <td>${d.Country.CountryName}</td>
                <td>${ d.OfficeName}</td>
                <td>${ d.Country.CurrencyCode}</td>
                <td>${d.IsCurrent ? 'yes' : 'no'}</td>
                </tr>`
                regionHighLight[d.Country.CountryCode] = '1';
                VectorMap.series.regions[0].setValues(regionHighLight);
                $('#home-locations-list').append(content)
              },
            });
          });
        },
      });
    },
  });

  $(document).on('DOMSubtreeModified', () => {
    $('#country-table-body').children().length > 0 ||  $('#homepage-locations').children().length
      ? $('#no-locations').addClass('d-none')
      : $('#no-locations').removeClass('d-none');
  });
  
 