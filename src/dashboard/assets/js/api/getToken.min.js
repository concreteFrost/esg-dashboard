//This setup is related to the old endpoints
var setup = $.ajaxSetup({
  url: 'https://europe.grc1.com/iGRC/Auth/token',
  method: 'POST',
  data: {
    username: 'rich@esg-one.co',
    password: 'Temp5678',
    grant_type: 'password',
  },
});

//Used for new endpoints
$(document).ready(() => {
  if (!localStorage.getItem('access_token')) {
    $.ajax(
      {
        url: "https://data.esg-one.uk/esg1-api/token",
        method: "POST",
        data: {
          username: "esgapiadmin",
          password: "JGzAunUj&K81",
          grant_type: "password"
        },
        success: function (data) {
          console.log("new token", data)
          localStorage.setItem('access_token', data.access_token);
        },
        error: function (e) {
          console.log(e)
        }
      }
    )
  }

})