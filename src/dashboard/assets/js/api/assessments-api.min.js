$.ajax({
    setup,
    success: function (data) {
      getAssessments(data);
    },
    error: function (e) {
      console.log(e);
    },
  });

function getAssessments(data) {
    $.ajax({
      url: 'https://europe.grc1.com/iGRC/api/Assessments/Get',
      async: true,
      crossDomain: true,
      method: 'GET',
      data: {
        tenantName: 'ESG-ONE',
      },
      beforeSend: function (xhr) {
        xhr.setRequestHeader('Authorization', 'Bearer ' + data.access_token);
      },
  
      success: function (data2) {
        const assess = data2;

        assess.forEach(a=> {
            var split = a.AssessmentName.split('-')    
            console.log(split)
            const el=`<tr>
            <td>${split[0]}</td>
            <td>${split[1]}</td>
            </tr>`

            $('#assessments-table-body').append(el)
        });
       
        createTable("#assessments-datatable");
      },
    });
  }