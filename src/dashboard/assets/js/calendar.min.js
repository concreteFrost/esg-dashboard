var selectedDate;

var calendar = $('#full-calendar').fullCalendar({
  header: {
    left: 'prev',
    center: 'title',
    right: 'next',
  },
  views: {
    week: {
      titleFormat: 'MMMM',
    },
    month: {
      titleFormat: 'MMMM',
    },
  },
  height: 'parent',

  dayClick: function (date, jsEvent, view) {
   $('#new-event :input').not(':input[type=radio]').val('')
   
    $('#new-event').modal('show');
    selectedDate = date.format();
  },
  eventClick: function (a, b) {
    console.log(a);
    $('#event-info').removeClass('d-none');
    $('#event-title').html(a.title);
    $('#event-desc').html(a.description);
    $('#event-start-time').html(a.startTime);
    $('#event-end-time').html(a.endTime);
    $('#event-ending-date').html(a.endDay);

  },

  eventRender: function (event, element) {
    element.append("<span class='deleteEvent'>X</span>");
    element.find('.deleteEvent').on('click', function () {
      calendar.fullCalendar('removeEvents', event._id);
      $('#event-info').addClass('d-none');
    });
  },
});

$('.new-event--add').click(() => {
  $('#new-event').modal('hide');


  calendar.fullCalendar(
    'renderEvent',
    {
      id: uuidv4(),
      title: $('.new-event--title').val(),
      start: selectedDate,
      end: $('.new-event--end-day').val(),
      endDay: $('.new-event--end-day').val(),
      startTime: $('.new-event--start-time').val(),
      description: $('.new-event--desc').val(),
      endTime: $('.new-event--end-time').val(),
      className: $('.event-tag input:checked').val(),
    },
    true
  );
});

$('.fullcalendar-btn-next').click(function () {
  calendar.fullCalendar('next');
});

$('.fullcalendar-btn-prev').click(function () {
  calendar.fullCalendar('prev');
});
