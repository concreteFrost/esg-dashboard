var current;

$(document).ready(function () {
  $('a').removeClass('active');
  changeSectionOnNav();
});

window.addEventListener('hashchange', () => {
  $(current).css('backgroundColor', '#ffffff');
  changeSectionOnNav();
});

function changeSectionOnNav() {
  $('.navbar-inner li a').each(function () {
    if ($(this).prop('href') == window.location.href) {
      
      const collapseParent = $(this).parents('div.collapse').length;
      if (collapseParent > 1) {
        current=$(this)
        $(this).css('backgroundColor', '#d4fff9');
        $(this).parents('div.collapse').addClass('show');
        $(this)
          .parents('.nav-item')
          .find('a:first')
          .attr('aria-expanded', 'true')
          .addClass('active');

        $(this)
          .closest('li.expandable')
          .find('a:first')
          .attr('aria-expanded', 'true')
          .css('backgroundColor', '#c2fbff');
      } else {
        $(this).addClass('active');
      }
    }
  });
}
