//On TRUE allows to move cards
var draggable = false;

//Sortable lists enabled
$('#manage-cards-btn').click(() => {
  $('#sortable-1').sortable({
    connectWith: '#sortable-2',
  });

  $('#sortable-2').sortable({
    connectWith: '#sortable-1',
  });
});

//Add or Remove cards on `save changes` click
$('#save-cards-btn').click(() => {
  $('#sortable-1 li').each((id, el) => {
    let match = '#' + $(el).html().toLowerCase().replace(' ', '-') + `-card`;
    $(match).show();
  });
  $('#sortable-2 li').each((id, el) => {
    let match = '#' + $(el).html().toLowerCase().replace(' ', '-') + `-card`;
   
    $(match).hide();
  });

  $('#cat li')
    .sort(function (a, b) {
      return parseInt(a.id) > parseInt(b.id);
    })
    .each(function () {
      var elem = $(this);
      elem.remove();
      $(elem).appendTo('#cat');
    });
});

//Change colors on dragging list items
$('#sortable-2').bind('DOMSubtreeModified', function () {
  $('#sortable-2 li').each((id, el) => { 
    $(el).removeClass('btn-success')
    $(el).addClass('btn-secondary')
  });
});

$('#sortable-1').bind('DOMSubtreeModified', function () {
  $('#sortable-1 li').each((id, el) => { 
    $(el).addClass('btn-success')
    $(el).removeClass('btn-secondary')
  });
});

//Enable card swapping
$('#swap-cards-btn').click(()=>{
  $('.movable-cards').toggleClass('card-move')
  draggable=!draggable
  if(draggable){
    $('#sort-cards').sortable();
  }
  else{
    $('#sort-cards').sortable("destroy");
  }
})

