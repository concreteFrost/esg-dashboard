$('#glossaryModal').on('shown.bs.modal', () => {
  $.ajax({
    url: '/dashboard/assets/data/glossary.json',
    method: 'GET',
    success: function (data) {
      data.Sheet1.forEach((d) => {
        let tax = d['Taxonomy / Tags'];

        if (!tax) {
          tax = '';
        }
        const el = `<tr>
        <td>${d.ESG}</td>
        <td>${d.Description}</td>
        <td>${tax}</td>
        </tr>`;

        $('#glossary-table-body').append(el);
      });

      createGlossaryTable();
    },
  });
});

$('#glossaryModal').on('hide.bs.modal', () => {
  $('#glossary-table').DataTable().destroy();
  $('#glossary-table-body').empty();
});

function createGlossaryTable() {
  $('#glossary-table').DataTable({
    dom: 'frltp',

    language: {
      paginate: {
        previous: "<i class='fas fa-angle-left'>",
        next: "<i class='fas fa-angle-right'>",
      },
      lengthMenu: 'Display _MENU_',
    },
    buttons: [
      {
        extend: 'collection',
        text: 'Show columns',
        columns: '.colhead',
        className: 'btn-outline-primary btn-sm ',
        buttons: ['columnsVisibility'],
        visibility: !0,
      },
    ],
  });
}
