let dt;
let isFiltered=false;

$(document).ready(() => {
  $.ajax({
    url: '/dashboard/assets/data/csdd.json',
    method: 'GET',
    success: function (data) {
      console.log(data)
     data.forEach(element => {
      console.log(element.SubCategory)
      const d = `<tr>
      <td>${element["Disclosure Question / Metric"]}'</td>
      <td>${element["Current Data"]}</td>
      <td>${element.Category}</td>
      <td>${element.SubCategory}</td>
      <td>${element["Other Standard Links"]}</td>
      <td>${element.Owner}</td>
      <td>${element["Executive Owner"]}</td>
      <td>${element["Reporting Level"]}</td>
      </tr>`
      $("#csdd-datatable-body").append(d)
     });
     dt = new DT("#csdd-datatable")
    
    },
    
  });
 
});

$("#show-gaps").click(()=>{

 
  if(!isFiltered){
    dt.id.columns(1).search("^((?!Yes).)*$", true, false).draw();
    $("#show-gaps").text('Show All')
  }
  else{
    dt.id.columns().search("").draw();
    $("#show-gaps").text('Show Gaps')
  }

  isFiltered=!isFiltered;

})
